head
    title History Map
    link(rel="icon" type="image/png" href="public/globe-4x.png")

body
    .container
        +historyShows

template(name='historyShows')
    +navBar
    +svgMapTab

    each timeUnits
        +timeSlider

    .row
        h2 
            .columns.small-4.medium-4 Year: #{activeYear} 
            .columns.small-8.medium-8 Region: #{activeRegion}
    .row
        ul
            each shows
                +show

template(name='navBar')
    nav.top-bar(role="navigation" data-topbar)
        ul.title-area(style='background-color: black')
            li.name
                h1
                    a(href="#") History Map
            li.toggle-topbar.menu-icon
                a(href="#")
                    span Menu
        section.top-bar-section
            ul.right
                li.has-dropdown
                    a#contribute-dropdown(href="#") Contribute
                    ul.dropdown
                        li
                            a(href="https://trello.com/c/fE23ZQiC/20-report-bugs-and-suggest-features") Suggest changes on Trello
                        li
                            a(href="https://github.com/evilseanbot/historymap") Fork on github

template(name='svgMapTab')
    .row
        .columns.small-6.medium-6
            ul.accordion(data-accordion)
                li.accordion-navigation
                    a.map-menu(href="#map") Specific Region
                    .content(id="map")        
                        .map-container 
                            +svgmap

template(name="timeSlider")
    .row 
        div #{title}
            if isCentury
                span.date.activeDate #{century}
                span.date #{year}
            else
                span.date #{century}
                span.date.activeDate #{year}
    .row
        .columns.small-12.medium-12
            .range-slider.round(id='#{title}Slider' 
                data-slider 
                data-options="start: #{start}; end: #{end}; step: 1"
            )
                span.range-slider-handle(role="slider" tabindex="0") 
                    span.slider-label
                        if isCentury 
                            span #{century}
                        else 
                            span #{year}
                span.range-slider-active-segment

template(name="show")
    li #{title}
        div
            span.subtext (#{startYear}~#{endYear}) #{difference}
            each regions
                span.subtext.region-label #{this}
    
    +youtube        
    hr

template(name="youtube")
    if isYoutube
         if src
            a.expand Watch
            if expanded
                .video
                    iframe#ytplayer(type="text/html" width="640" height="390"
                        src="#{src}"
                        frameborder="0"
                    )
